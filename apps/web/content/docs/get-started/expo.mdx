---
title: Expo
description: Privacy-first mobile analytics for Expo apps. Track users, sessions and events | Phase Analytics
---

import { Step, Steps } from 'fumadocs-ui/components/steps';
import { TypeTable } from 'fumadocs-ui/components/type-table';
import { Tab, Tabs, TabsList, TabsTrigger, TabsContent } from 'fumadocs-ui/components/tabs';
import { CodeBlock, Pre } from 'fumadocs-ui/components/codeblock';

## Installation

<Steps>

<Step>

### Install the SDK

<Tabs defaultValue="bun" groupId="pkg" persist>
  <TabsList>
    <TabsTrigger value="npm" className="gap-2">
      <img src="https://cdn.simpleicons.org/npm/71717a" alt="npm" className="size-4 dark:brightness-200" />
      npm
    </TabsTrigger>
    <TabsTrigger value="bun" className="gap-2">
      <img src="https://cdn.simpleicons.org/bun/71717a" alt="bun" className="size-4 dark:brightness-200" />
      bun
    </TabsTrigger>
    <TabsTrigger value="yarn" className="gap-2">
      <img src="https://cdn.simpleicons.org/yarn/71717a" alt="yarn" className="size-4 dark:brightness-200" />
      yarn
    </TabsTrigger>
    <TabsTrigger value="pnpm" className="gap-2">
      <img src="https://cdn.simpleicons.org/pnpm/71717a" alt="pnpm" className="size-4 dark:brightness-200" />
      pnpm
    </TabsTrigger>
  </TabsList>
  <TabsContent value="npm">
    <CodeBlock lang="bash" allowCopy={false}>
```bash
npm install phase-analytics
```
    </CodeBlock>
  </TabsContent>
  <TabsContent value="bun">
    <CodeBlock lang="bash" allowCopy={false}>
```bash
bun add phase-analytics
```
    </CodeBlock>
  </TabsContent>
  <TabsContent value="yarn">
    <CodeBlock lang="bash" allowCopy={false}>
```bash
yarn add phase-analytics
```
    </CodeBlock>
  </TabsContent>
  <TabsContent value="pnpm">
    <CodeBlock lang="bash" allowCopy={false}>
```bash
pnpm add phase-analytics
```
    </CodeBlock>
  </TabsContent>
</Tabs>

</Step>

<Step>

### Install Required Peer Dependencies

Phase Analytics requires the following Expo packages to function properly:

<Tabs defaultValue="bun" groupId="pkg" persist>
  <TabsList>
    <TabsTrigger value="npm" className="gap-2">
      <img src="https://cdn.simpleicons.org/npm/71717a" alt="npm" className="size-4 dark:brightness-200" />
      npm
    </TabsTrigger>
    <TabsTrigger value="bun" className="gap-2">
      <img src="https://cdn.simpleicons.org/bun/71717a" alt="bun" className="size-4 dark:brightness-200" />
      bun
    </TabsTrigger>
    <TabsTrigger value="yarn" className="gap-2">
      <img src="https://cdn.simpleicons.org/yarn/71717a" alt="yarn" className="size-4 dark:brightness-200" />
      yarn
    </TabsTrigger>
    <TabsTrigger value="pnpm" className="gap-2">
      <img src="https://cdn.simpleicons.org/pnpm/71717a" alt="pnpm" className="size-4 dark:brightness-200" />
      pnpm
    </TabsTrigger>
  </TabsList>
  <TabsContent value="npm">
    <CodeBlock lang="bash" allowCopy={false}>
```bash
npx expo install @react-native-async-storage/async-storage @react-native-community/netinfo expo-device expo-localization expo-router
```
    </CodeBlock>
  </TabsContent>
  <TabsContent value="bun">
    <CodeBlock lang="bash" allowCopy={false}>
```bash
bunx expo install @react-native-async-storage/async-storage @react-native-community/netinfo expo-device expo-localization expo-router
```
    </CodeBlock>
  </TabsContent>
  <TabsContent value="yarn">
    <CodeBlock lang="bash" allowCopy={false}>
```bash
yarn dlx expo install @react-native-async-storage/async-storage @react-native-community/netinfo expo-device expo-localization expo-router
```
    </CodeBlock>
  </TabsContent>
  <TabsContent value="pnpm">
    <CodeBlock lang="bash" allowCopy={false}>
```bash
pnpm dlx expo install @react-native-async-storage/async-storage @react-native-community/netinfo expo-device expo-localization expo-router
```
    </CodeBlock>
  </TabsContent>
</Tabs>

These dependencies are **required** for the SDK to work correctly. The SDK uses:
- `@react-native-async-storage/async-storage` - Local storage for offline event queuing
- `@react-native-community/netinfo` - Network state monitoring
- `expo-device` - Device information collection
- `expo-localization` - Locale and timezone detection
- `expo-router` - Automatic screen tracking

</Step>

<Step>

### Get Your API Key

1. Sign in to [Phase Dashboard](https://phase.sh/dashboard)
2. Create a new project or select an existing one
3. Open API Keys tab
3. Copy your API Key (starts with `phase_`)

</Step>

</Steps>

## Setup

Wrap your app with the `PhaseProvider` component in your root layout to initialize the SDK:

<CodeBlock
  title="app/_layout.tsx"
  lang="tsx"
  icon={<img src="https://cdn.simpleicons.org/react/61DAFB" alt="React" className="size-4" />}
>
```tsx
import { PhaseProvider } from 'phase-analytics/expo';

export default function RootLayout() {
  return (
    <PhaseProvider
      apiKey="phase_xxx"
    >
      <Stack />
    </PhaseProvider>
  );
}
```
</CodeBlock>

The `PhaseProvider` only initializes the SDK. You must call `Phase.identify()` before tracking events.

## Configuration

The `PhaseProvider` component accepts the following props:

<TypeTable
  type={{
    apiKey: {
      description: 'Your Phase API key (starts with `phase_`)',
      type: 'string',
      required: true,
    },
    trackNavigation: {
      description: 'Automatically track screen views with Expo Router',
      type: 'boolean',
      default: 'false',
    },
    baseUrl: {
      description: 'Custom API endpoint for self-hosted deployments',
      type: 'string',
      default: '"https://api.phase.sh"',
    },
    logLevel: {
      description: 'Console logging level for debugging',
      type: '"info" | "warn" | "error" | "none"',
      default: '"none"',
    },
    deviceInfo: {
      description: 'Collect device metadata (model, OS version, platform)',
      type: 'boolean',
      default: 'true',
    },
    userLocale: {
      description: 'Collect user locale and timezone information',
      type: 'boolean',
      default: 'true',
    },
  }}
/>

## Usage

### Identify User

**Required:** Call `Phase.identify()` before using any other methods. This registers the device and starts a session.

<CodeBlock
  title="app/index.tsx"
  lang="tsx"
  icon={<img src="https://cdn.simpleicons.org/react/61DAFB" alt="React" className="size-4" />}
>
```tsx
import { Phase } from 'phase-analytics/expo';
import { useEffect } from 'react';

export default function App() {
  useEffect(() => {
    // Initialize analytics - no PII collected by default
    Phase.identify();
  }, []);

  return <YourApp />;
}
```
</CodeBlock>

**Privacy by default:**
- No personal data is collected without explicit properties
- Device ID is auto-generated and stored locally
- Only technical metadata is collected (OS version, platform, locale)

**Adding custom properties:**

You can optionally attach user properties. **Important:** If you add PII (personally identifiable information), ensure you have proper user consent:

<CodeBlock
  lang="tsx"
  icon={<img src="https://cdn.simpleicons.org/typescript/3178C6" alt="TypeScript" className="size-4" />}
>
```tsx
// After user login and consent
await Phase.identify({
  user_id: '123',
  plan: 'premium',
  beta_tester: true
});

// ⚠️ If adding PII, get consent first
const hasConsent = await customGetUserConsent();
if (hasConsent) {
  await Phase.identify({
    email: 'user@example.com',
    name: 'John Doe'
  });
}
```
</CodeBlock>

Properties must be primitives: `string`, `number`, `boolean`, or `null`.

### Track Events

Track custom events with optional parameters. **Note:** `Phase.identify()` must be called first.

<CodeBlock
  lang="tsx"
  icon={<img src="https://cdn.simpleicons.org/typescript/3178C6" alt="TypeScript" className="size-4" />}
>
```tsx
// Event without parameters
Phase.track('app_opened');

// Event with parameters
Phase.track('purchase_completed', {
  amount: 99.99,
  currency: 'USD',
  product_id: 'premium_plan'
});
```
</CodeBlock>

**Event naming rules:**
- Alphanumeric characters, underscores (`_`), hyphens (`-`), periods (`.`), and forward slashes (`/`)
- 1-256 characters
- Examples: `purchase`, `user.signup`, `payment/success`

**Event parameters:**
- Must be primitives: `string`, `number`, `boolean`, or `null`

### Automatic Screen Tracking

Enable automatic screen tracking by setting `trackNavigation` to `true` in your root layout. The SDK uses Expo Router's navigation hooks to track screen changes automatically:

<CodeBlock
  title="app/_layout.tsx"
  lang="tsx"
  icon={<img src="https://cdn.simpleicons.org/react/61DAFB" alt="React" className="size-4" />}
>
```tsx
import { PhaseProvider } from 'phase-analytics/expo';
import { Stack } from 'expo-router';

export default function RootLayout() {
  return (
    <PhaseProvider
      apiKey="phase_xxx"
      trackNavigation={true}
    >
      <Stack />
    </PhaseProvider>
  );
}
```
</CodeBlock>

**How it works:**
- Wraps any Expo Router component (`Stack`, `Tabs`, `Drawer`, etc.)
- Automatically tracks screen views on route changes
- Screen names are derived from pathname
- Works with nested routes and dynamic segments

No additional setup required, just wrap your navigation structure with `PhaseProvider`.

## Type Reference

### DeviceProperties

Custom user/device attributes passed to `Phase.identify()`:

<TypeTable
  type={{
    '[key: string]': {
      description: 'Any custom property name',
      type: 'string | number | boolean | null',
    },
  }}
/>

### EventParams

Event parameters passed to `Phase.track()`:

<TypeTable
  type={{
    '[key: string]': {
      description: 'Any custom parameter name',
      type: 'string | number | boolean | null',
    },
  }}
/>

## How It Works

### Offline Support

Events are queued locally using `@react-native-async-storage/async-storage` when offline. The queue automatically syncs when connection is restored.

### Privacy

- No personal data is collected by default
- Device IDs are generated locally and stored persistently
- Geolocation is resolved server-side from IP address (disable with properties)
- All data collection is optional via configuration

### Performance

- Offline events are batched and sent asynchronously
- Network state is monitored via `@react-native-community/netinfo`
- Failed requests retry with exponential backoff
- Maximum batch size: 1000 events